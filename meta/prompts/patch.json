{
  "task": "Implement LABS_FAIL_FAST and finalize v0.1 alignment",
  "objective": "Add the LABS_FAIL_FAST toggle, update documentation to reflect delivered CriticAgent and toggle semantics, and resolve divergences between canonical vs expanded controls/meta.",
  "changes": [
    {
      "id": "fail_fast_toggle",
      "description": "Implement LABS_FAIL_FAST environment variable to support strict vs relaxed validation.",
      "edits": [
        "Update labs/agents/critic.py: check LABS_FAIL_FAST (default true). If false, log 'validation skipped' and continue instead of raising MCPUnavailableError.",
        "Update labs/cli.py: respect LABS_FAIL_FAST when MCP_ADAPTER_CMD is missing/unavailable. Exit non-zero only if strict mode is active.",
        "Add tests in tests/test_critic.py and tests/test_pipeline.py to cover both strict and relaxed behaviors."
      ]
    },
    {
      "id": "docs_refresh",
      "description": "Update documentation to reflect delivered CriticAgent and fail-fast toggle.",
      "edits": [
        "Update docs/labs_spec.md: move CriticAgent from 'future work' to 'implemented in v0.1'.",
        "Add section describing LABS_FAIL_FAST semantics (strict = exit non-zero, relaxed = log skip + continue).",
        "Update README.md to include LABS_FAIL_FAST in environment variable list."
      ]
    },
    {
      "id": "canonicalization",
      "description": "Resolve divergence between spec baseline and code for controls and meta tags.",
      "edits": [
        "Decide direction: either (a) prune ControlGenerator back to two shader mappings and MetaGenerator tags to ['circle','baseline'], or (b) bless expanded sets and update docs/tests accordingly.",
        "If pruning: update labs/generator/control.py and labs/generator/meta.py to canonical sets, and adjust tests/test_generator_components.py expectations.",
        "If blessing expansion: update docs/labs_spec.md and related tests to include expanded taxonomy and detune mapping."
      ]
    }
  ],
  "constraints": {
    "rules": [
      "No new dependencies beyond Python stdlib.",
      "LABS_FAIL_FAST must default to strict (true) for CI reproducibility.",
      "Docs and tests must reflect final decision on canonical vs expanded sets.",
      "All tests must pass after patch."
    ]
  },
  "exit_criteria": [
    "LABS_FAIL_FAST toggle implemented and tested in both strict and relaxed modes.",
    "docs/labs_spec.md and README.md reflect CriticAgent as implemented and describe LABS_FAIL_FAST.",
    "ControlGenerator and MetaGenerator are aligned with either canonical baseline or updated spec/docs for expansion.",
    "Audit passes with no remaining divergences for v0.1."
  ]
}

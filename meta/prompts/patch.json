{
  "task": "Patch critic provenance and relaxed mode documentation",
  "objective": "Fix validation_error.detail transport provenance, update CriticAgent docstring, and correct .env guidance so relaxed mode is accurately described.",
  "changes": [
    {
      "id": "critic_transport_detail",
      "description": "Propagate actual MCP transport type into validation_error.detail.",
      "edits": [
        "Update labs/agents/critic.py: in review() and error handling, set validation_error.detail to the resolved transport (stdio, tcp, or socket) instead of defaulting to stdio.",
        "Thread resolved transport name from labs/mcp_stdio.py build_validator_from_env into CriticAgent so detail is accurate.",
        "Update tests/test_critic.py: assert validation_error.detail matches active transport (e.g. 'tcp_unavailable' when MCP_ENDPOINT=tcp)."
      ]
    },
    {
      "id": "critic_docstring",
      "description": "Update CriticAgent.review docstring to reflect current relaxed mode behavior.",
      "edits": [
        "Edit labs/agents/critic.py:46 docstring to state that relaxed mode still invokes MCP validation but downgrades failures to warnings, rather than skipping validation."
      ]
    },
    {
      "id": "env_relaxed_mode",
      "description": "Correct .env comment for LABS_FAIL_FAST relaxed mode.",
      "edits": [
        "Update .env:17 to explain that LABS_FAIL_FAST=0 downgrades validation failures to warnings but still attempts MCP validation."
      ]
    }
  ],
  "constraints": {
    "rules": [
      "No new dependencies.",
      "Transport provenance must be deterministic across stdio, tcp, and socket.",
      "Docstring and .env must match actual relaxed mode implementation.",
      "All tests must pass after patch."
    ]
  },
  "exit_criteria": [
    "validation_error.detail reflects the correct MCP transport type.",
    "CriticAgent.review docstring correctly describes relaxed mode behavior.",
    ".env comment for LABS_FAIL_FAST is updated and accurate.",
    "tests/test_critic.py asserts transport-specific detail values and passes.",
    "Audit no longer reports divergence for transport provenance or relaxed mode documentation."
  ]
}
